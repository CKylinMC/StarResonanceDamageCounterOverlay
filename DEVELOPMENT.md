# 星火共鸣伤害统计覆盖层 - 开发模式

## 🚀 快速开始

### 生产环境
- 确保星火共鸣伤害统计服务器在 `http://localhost:8989` 运行
- 应用会自动连接到真实的API端点

### 开发环境
- 应用会自动使用模拟数据，无需运行实际的游戏服务器
- 模拟数据会每200ms自动更新，模拟真实的游戏数据变化

## 🛠️ 开发工具

在开发模式下，右上角会显示一个工具按钮 🛠️，点击可以展开开发工具面板：

### 功能
- **添加玩家**: 随机添加一个新的模拟玩家
- **清除数据**: 清除当前所有数据
- **重置数据**: 重置并重新生成模拟数据
- **玩家列表**: 显示当前活跃的玩家及其UID后6位

### 控制模拟模式
模拟模式由以下条件控制：
1. 当前为开发环境 (`import.meta.env.DEV === true`)
2. `IS_MOCK_MODE` 标志为 `true`

## 📊 模拟数据特性

### 玩家数据
- **UID**: 18位随机数字字符串
- **实时DPS**: 1,000 - 15,000 范围内的随机值，会实时波动
- **总伤害**: 各类伤害的累计值
  - 普通伤害: 50,000 - 200,000
  - 暴击伤害: 80,000 - 400,000  
  - 幸运伤害: 30,000 - 150,000
  - 暴击+幸运: 100,000 - 500,000
- **伤害计数**: 对应各类伤害的命中次数

### 实时更新
- 每200ms更新一次数据
- 模拟伤害增长和DPS波动
- 自动更新最大DPS记录

## 🔧 API模拟

### `/api/data` 端点
```typescript
interface DPSResponse {
  code: 0;
  user: {
    [uid: string]: {
      realtime_dps: number;
      realtime_dps_max: number;
      total_dps: number;
      total_damage: {
        normal: number;
        critical: number;
        lucky: number;
        crit_lucky: number;
        hpLessen: number;
        total: number;
      };
      total_count: {
        normal: number;
        critical: number;
        lucky: number;
        total: number;
      };
    };
  };
}
```

### `/api/clear` 端点
清除所有统计数据，1秒后重新开始生成模拟数据。

## 🎯 使用场景

### 开发测试
1. **UI调试**: 无需运行游戏即可测试界面
2. **数据格式验证**: 确保所有数据类型正确处理
3. **性能测试**: 测试大量数据下的渲染性能
4. **响应式测试**: 测试不同屏幕尺寸下的显示效果

### 演示
- 可用于展示应用功能
- 模拟真实的游戏数据变化
- 不依赖游戏环境

## 📱 界面特性

### 自适应滚动
- 小窗口友好的滚动设计
- 固定表头，数据区域可滚动
- 自定义滚动条样式

### 数据显示
- 按总伤害自动排序
- 数值智能格式化 (K/M 单位)
- 不同伤害类型的颜色区分
- 实时更新的透明覆盖层设计

## 🚦 环境切换

应用会自动检测运行环境：
- **开发环境**: 显示开发工具，使用模拟数据
- **生产环境**: 隐藏开发工具，连接真实API

无需手动配置，基于 Vite 的环境变量自动切换。
